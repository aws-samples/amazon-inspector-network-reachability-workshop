



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The workshop will demonstrate how you can validate their network configuration without needing to have a deep networking background by using Inspectors Network Reachability report. You will learn how this report can help them find misconfigurations in the architecture or behaviors they might not have expected. The demo will finish with using the Network Reachability report findings integrated with other Security Services to remediate these issues.">
      
      
        <link rel="canonical" href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/02-running-inspector/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Module 2: Running the Inspector Report - Finding and addressing Network Misconfigurations on AWS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#module-2-running-the-inspector-report" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" title="Finding and addressing Network Misconfigurations on AWS" class="md-header-nav__button md-logo">
          
            <img src="../images/aws_smile_logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Finding and addressing Network Misconfigurations on AWS
            </span>
            <span class="md-header-nav__topic">
              
                Module 2: Running the Inspector Report
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mikewest82/InspectorNetworkReachability
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Overview" class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" title="Finding and addressing Network Misconfigurations on AWS" class="md-nav__button md-logo">
      
        <img src="../images/aws_smile_logo.png" width="48" height="48">
      
    </a>
    Finding and addressing Network Misconfigurations on AWS
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mikewest82/InspectorNetworkReachability
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01-environment-setup/" title="Module 1: Environment Build and Configuration" class="md-nav__link">
      Module 1: Environment Build and Configuration
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Module 2: Running the Inspector Report" class="md-nav__link md-nav__link--active">
      Module 2: Running the Inspector Report
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03-evaluate-findings/" title="Module 3: Evaluating Findings" class="md-nav__link">
      Module 3: Evaluating Findings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04-integration-and-remediation/" title="Module 4: Integration and Remediation" class="md-nav__link">
      Module 4: Integration and Remediation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../05-cleanup/" title="Module 5: Cleanup" class="md-nav__link">
      Module 5: Cleanup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../presentation-notes/" title="Presentation Notes" class="md-nav__link">
      Presentation Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/edit/master/docs/02-running-inspector.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="module-2-running-the-inspector-report">Module 2 - Running the Inspector Report</h1>
<p>In the previous module you created the workshop's environment including EC2 instances running various applications. In this module you will gather the information from the CloudFormation Stack and use it to validate those services are running and run an Inspector Network Reachability report.</p>
<h1 id="running-the-inspector-report">Running the Inspector Report</h1>
<ol>
<li>
<p>Refresh the CloudFormation interface until the Status shows “Create Complete”</p>
<p><img alt="" src="../images/mod2-1-create-complete.png" /></p>
</li>
<li>
<p>Click on the Stack Name</p>
</li>
<li>
<p>Go to the Outputs tab of the Stack</p>
<p><img alt="" src="../images/mod2-2-cloudformation-outputs.png" /></p>
</li>
<li>
<p>Copy the DNS names from the Output frame into a text editor window. You can use these to validate the Web servers that should be publically accessible are.</p>
<ol>
<li>
<p>The LoadBalancerFullDNS and PoCWebServer1PublicDNS should work.</p>
</li>
<li>
<p>PoCWebServer2PublicDNS should time out.</p>
</li>
</ol>
</li>
<li>
<p>Copy the instance ID’s from the Output frame into a text editor window. These will help you when you review the Inspector report.</p>
</li>
<li>
<p>Go to the EC2 console to validate the instances are running.</p>
<p><img alt="" src="../images/mod2-3-ec2-validate.png" /></p>
</li>
<li>
<p>Go to the Inspector console.</p>
<p>Next you will create the Amazon Inspector Targets and Templates. This workshop makes you do this manually to get a feel for how it works, but this can be automated.</p>
<p>First, you create the Assessment Target to include all instances, even those without the agent.</p>
<p><img alt="" src="../images/mod2-4-inspector.png" /></p>
<div class="admonition info">
<p class="admonition-title">If you have not used Inspector in this region before</p>
<p>You will get a different set of screens. Start by clicking a.) “Getting Started” on the Inspector page, and then b.) “Advanced Setup” on the bottom right to get to the Assessment Target screen – Step 10</p>
</div>
</li>
<li>
<p>Click on Assessment Targets. Your window should be similar to the image below.</p>
<p><img alt="" src="../images/mod2-5-targets.png" /></p>
</li>
<li>
<p>Click “Create”</p>
</li>
<li>
<p>Fill out the screen as follows:</p>
<ol>
<li>
<p>Name: {Whatever name you will remember}</p>
</li>
<li>
<p>All Instances: Uncheck the box</p>
</li>
<li>
<p>Use Tags</p>
<ol>
<li>
<p>Key: NetworkReachabilityDemo</p>
</li>
<li>
<p>Value: True</p>
</li>
</ol>
</li>
<li>
<p>Install Agents: Uncheck the box</p>
</li>
</ol>
<p><img alt="" src="../images/mod2-6-targets-2.png" /></p>
<div class="admonition info">
<p class="admonition-title">Service Linked Role</p>
<p>Inspector may prompt you for permission to create a Service Linked role to give the Inspector service permission to do work on your behalf.  Click OK.</p>
</div>
</li>
<li>
<p>Click “Save”</p>
<div class="admonition info">
<p class="admonition-title">If you have not used Inspector in this region before</p>
</div>
<p>You should click "Next" to get to the Assessment Template screen – Step 14</p>
</li>
<li>
<p>Click on Assessment Templates</p>
</li>
<li>
<p>Click on “Create”</p>
<p><img alt="" src="../images/mod2-7-templates.png" /></p>
</li>
<li>
<p>Fill out the screen as follows:</p>
<ol>
<li>
<p>Name: {Whatever name you will remember}</p>
</li>
<li>
<p>Target Name: {The Assessment Target you just created} - This is only required if you have already used Inspector in this region before. Otherwise this is enabled by default.</p>
</li>
<li>
<p>Rules packages: Select ONLY “Network Reachability-1.1”</p>
</li>
<li>
<p>Duration: “15 minutes”</p>
</li>
<li>
<p>Assessment Schedule: Uncheck the box</p>
</li>
</ol>
</li>
<li>
<p>Click the button labelled “Create” or “Create and run”</p>
</li>
<li>
<p>Click on Assessment Runs and then the refresh icon. Your window should be similar to the image below.</p>
<p><img alt="" src="../images/mod2-8-runs.png" /></p>
</li>
<li>
<p>The status should say “Analyzing” or “Collecting data”</p>
<p>You are now going to publish the report to an SNS topic so you can take action. An SNS topic has been created for you in the CloudFormation Template.</p>
</li>
<li>
<p>Click on Assessment templates</p>
</li>
<li>
<p>Click on the right arrow next to the Assessment your created to expand the options.</p>
</li>
<li>
<p>Click on box under "SNS topics"</p>
</li>
<li>
<p>Click the drop down and select the Topic named {Accountnumber}:InspectorAutomation</p>
</li>
<li>
<p>Deselect all of the events EXCEPT "Findings Reported".</p>
</li>
<li>
<p>Click Save</p>
</li>
</ol>
<p>You have successfully configured Inspector and started an assessment. This assessment can take up to 15 minutes, so now’s a good time for you to review the architecture. The <a href="../assets/demo-support-presentation.pdf">Presentation</a> includes the architecture diagram, the route tables, and the security groups. The <a href="../presentation-notes/">Presentation Notes</a> page then walks through the architecture with some probing questions.</p>
<p>You can also choose to skip to <a href="../03-evaluate-findings/">Evaluating Findings</a> once the report is complete.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../01-environment-setup/" title="Module 1: Environment Build and Configuration" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Module 1: Environment Build and Configuration
              </span>
            </div>
          </a>
        
        
          <a href="../03-evaluate-findings/" title="Module 3: Evaluating Findings" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Module 3: Evaluating Findings
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>